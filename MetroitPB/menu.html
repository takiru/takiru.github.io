<!DOCTYPE>
<html lang="ja">
<head>
  <script src="../assets/jquery-3.7.0.min.js"></script>
  <link href="../assets/fancytree-2.38.3/dist/skin-win8/ui.fancytree.min.css" rel="stylesheet">
  <script src="../assets/fancytree-2.38.3/dist/jquery.fancytree-all-deps.min.js"></script>
  
  <script type="text/javascript">
    $(function(){
      $("#tree").fancytree({
        extensions: ["filter", "wide"],
        source: [
          {
            title: "MetSglString", src: "MetSglString.html", top:true, children: [
              {
                title: "Fields", folder: true, children: [
                  { title: "Empty",  src: "#empty" },
                  { title: "NullValue", src: "#nullvalue" }
                ]
              },
              {
                title: "Methods", folder: true, children: [
                  { title: "Compare", src: "#compare" },
                ]
              }
            ]
          },
          {
            title: "MetString", src: "MetString.html", top:true, children: [
              {
                title: "Fields", folder: true, children: [
                  { title: "Empty",  src: "#empty" },
                  { title: "NullValue", src: "#nullvalue" }
                ]
              },
              {
                title: "Properties", folder: true, children: [
                  { title: "Value", src: "#value" }
                ]
              },
              {
                title: "Methods", folder: true, children: [
                  { title: "Substring", src: "#substring" },
                  { title: "ToString", src: "#tostring" }
                ]
              }
            ]
          }
        ],
        
        // ページ遷移
        activate: function(event, data){
          // フォルダの時は制御しない
          if (data.node.folder != undefined) {
            return;
          }
          
          // ベースページを特定
          var parentNode = data.node;
          while (!parentNode.data.top) {
            parentNode = parentNode.parent;
          }
          var page = parentNode.data.src;
          
          // IDを特定
          var id = data.node.data.src;
          
          var uri = page;
          if (data.node.data.top == undefined) {
            uri += id;
          }
          parent.contents.location.href = uri;
        }
      });
      
      // フィルター
      $("#search").keyup(function(e) {
        var filterText = $("#search").val();
        if (filterText == "") {
          $.ui.fancytree.getTree("#tree").clearFilter();
          $.ui.fancytree.getTree("#tree").expandAll(false);
          return;
        }
        
        var count = $.ui.fancytree.getTree("#tree").filterNodes(filterText);
        if (count > 0) {
          $.ui.fancytree.getTree("#tree").expandAll(true);
        } else {
          $.ui.fancytree.getTree("#tree").expandAll(false);
        }
      });
    });
  </script>
</head>
<body>
  <div style="margin:0 0 10 0;">
    <input id="search" />
  </div>
  <div id="tree"></div>
</body>
</html>
